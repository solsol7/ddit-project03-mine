<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="kr.or.ddit.company.dao.RecruitProcedureInterviewDAO">
	
	<!-- 면접일정 등록 -->
	<insert id="insertInterviewSchd" parameterType="InterviewSchdVO">
		<selectKey order="BEFORE" keyProperty="intrNo" resultType="String">
			SELECT 'INTR'||LPAD(INTR_SCHD_SEQ.NEXTVAL,6,'0') FROM DUAL
		</selectKey>
		INSERT INTO interview_schd (
		    intr_no
		    , apl_no
		    , rproc_order
		    , rcrt_no
		    , intr_intdate
		    , intr_place
		    , intr_date
		    , intr_type
		) VALUES (
		    #{intrNo}
		    , #{aplNo}
		    , #{rprocOrder}
		    , #{rcrtNo}
		    , #{intrIntdate}
		    , #{intrPlace}
		    , sysdate
		    , #{intrType}
		)
	</insert>
	
	<!-- 면접일정 조회 -->
	<select id="selectInterviewSchd" parameterType="InterviewSchdVO" resultType="InterviewSchdVO">
		SELECT
		    INTR_NO,
		    APL_NO,
		    RPROC_ORDER,
		    RCRT_NO,
		    TO_CHAR(INTR_INTDATE,  'YYYY-MM-DD') "intrIntdate",
		    INTR_PLACE,
		    TO_CHAR(INTR_DATE,  'YYYY-MM-DD') "intrDate",
		    INTR_TYPE
		FROM
		    INTERVIEW_SCHD
		WHERE
			INTR_NO = #{intrNo}
	</select>
	
	<!-- 면접일정 수정 -->
	<update id="updateInterviewSchd" parameterType="InterviewSchdVO">
		UPDATE interview_schd
		SET
		    intr_intdate = #{intrIntdate}
		    , intr_type = #{intrType}
		    <if test="intrPlace neq null">
		    , intr_place = #{intrPlace}
		    </if>
		WHERE
			INTR_NO = #{intrNo}
	</update>
</mapper>